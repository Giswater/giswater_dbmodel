/*
This file is part of Giswater 3
The program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.
This version of Giswater is provided by Giswater Association
*/
BEGIN;

-- Suppress NOTICE messages
SET client_min_messages TO WARNING;

SET search_path = "SCHEMA_NAME", public, pg_catalog;

SELECT plan(3);

INSERT INTO v_edit_sector
(sector_id, "name", descript, macrosector_id, sector_type, the_geom, undelete, active, parent_id, graphconfig, stylesheet)
VALUES(-901, 'sector_01', 'sector_project_ud', 1, NULL, 'SRID=25831;MULTIPOLYGON (((418837.8886538187 4576787.722571931, 418839.03219727107 4576859.312675647, 418839.7163349713 4576884.222272621, 418841.8611482566 4576905.475422448, 418850.05043534574 4576923.5831469055, 418865.02984381566 4576939.413603798, 418880.2880267024 4576949.363974043, 418904.03950229724 4576957.318230771, 418934.8781472681 4576965.155113362, 418942.25011183746 4576958.9570476115, 418987.47683237056 4576912.724631325, 419077.6865094035 4576851.494849604, 419112.6233808961 4576827.328546131, 419162.3052060602 4576794.008116211, 419187.8771064327 4576775.583892919, 419261.05484682263 4576726.22925921, 419279.10878352437 4576714.152103019, 419302.63668310223 4576696.042895742, 419327.4545560285 4576674.145672697, 419355.32841570163 4576649.868422683, 419372.60494484566 4576635.813897582, 419411.94112497254 4576599.803913684, 419436.30800329155 4576578.711695314, 419468.97188101243 4576555.835411075, 419488.8758100382 4576542.363238605, 419548.08966818516 4576502.835473895, 419590.4351144546 4576474.982434764, 419580.8810791465 4576460.447066408, 419563.6273914414 4576471.666559215, 419518.508022683 4576432.186839979, 419506.951930419 4576422.363912345, 419461.9755597603 4576382.604191583, 419451.4384601234 4576371.59725434, 419364.2427086262 4576290.166788847, 419351.6126035022 4576278.864867047, 419343.32553552964 4576271.5819185665, 419286.6490698167 4576221.662270731, 419227.9655968313 4576171.194637289, 419173.4246476864 4576189.136080133, 419154.4336583129 4576194.447232857, 419100.58010998904 4576265.240753696, 419098.9842105189 4576278.859787271, 419048.4446140072 4576342.598271761, 419027.6586980047 4576357.978453959, 418933.0960225959 4576420.341270859, 418840.60233662144 4576480.882069124, 418832.76439250715 4576489.88214285, 418829.2145699582 4576514.06920786, 418837.8886538187 4576787.722571931)))'::public.geometry, NULL, true, NULL, '{"use":[{"nodeParent":"", "toArc":[]}], "ignore":[], "forceClosed":[]}', NULL);
SELECT is((SELECT count(*)::integer FROM v_edit_sector WHERE sector_id = -901), 1, 'INSERT: v_edit_sector -901 was inserted');

UPDATE v_edit_sector SET descript = 'updated descript' WHERE sector_id = -901;
SELECT is((SELECT descript FROM v_edit_sector WHERE sector_id = -901), 'updated descript', 'UPDATE: v_edit_sector -901 was updated');

DELETE FROM v_edit_sector WHERE sector_id = -901;
SELECT is((SELECT count(*)::integer FROM v_edit_sector WHERE sector_id = -901), 0, 'DELETE: v_edit_sector -901 was deleted');


SELECT * FROM finish();


ROLLBACK;