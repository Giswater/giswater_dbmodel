/*
This file is part of Giswater 3
The program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.
This version of Giswater is provided by Giswater Association
*/


-- 3.1.105
gw_fct_crm2gis_hydro_catalog



-- 3.1.107

ALTER TABLE hydrometer ADD COLUMN hydrotype_id varchar(30);
ALTER TABLE hydrometer ADD COLUMN omtype_id integer;
ALTER TABLE hydrometer ADD COLUMN instal_date date;
ALTER TABLE hydrometer ADD COLUMN observ text;
ALTER TABLE hydrometer ADD COLUMN valve_type varchar(30);
ALTER TABLE hydrometer ADD COLUMN valve_diam numeric(12,3);
ALTER TABLE hydrometer ADD COLUMN valve_mat varchar(30);
ALTER TABLE hydrometer ADD COLUMN valve_update_date date;


CREATE TABLE hydro_cat_omtype (
"id" integer PRIMARY KEY,
"code" character varying(16) NOT NULL,
"observ" character varying(100));
FUNCTION gw_fct_crm2gis_hydro_catalog
FUNCTION gw_fct_crm2gis


CREATE TABLE crm.config_param_system (
  id serial PRIMARY KEY,
  parameter character varying(50) NOT NULL,
  value text,
  data_type character varying(20),
  context character varying(50),
  descript text);


INSERT INTO crm.config_param_system (parameter, value, data_type, context, descript) 
VALUES ('sys_fdw2crm_process', FALSE, 'Boolean', 'rtc', 'If exists, preprocess function exists moving data from foreing data wraper to crm tables');

ALTER TABLE ext_rtc_hydrometer ALTER COLUMN plot_code TYPE character varying(30);