/*
This file is part of Giswater 3
The program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.
This version of Giswater is provided by Giswater Association
*/


SET search_path = SCHEMA_NAME, public, pg_catalog;


CREATE TABLE audit_psector_arc_traceability (
	id serial4 NOT NULL,
	psector_id int4 NOT NULL,
	psector_state int2 NOT NULL,
	doable bool NOT NULL,
	addparam json NULL,
	audit_tstamp timestamp NULL DEFAULT now(),
	audit_user text NULL DEFAULT CURRENT_USER,
	action varchar(16) NOT NULL,
	arc_id varchar(16) NOT NULL,
	code varchar(30) NULL,
	node_1 varchar(16) NULL,
	node_2 varchar(16) NULL,
	y1 numeric(12, 3) NULL,
	y2 numeric(12, 3) NULL,
	elev1 numeric(12, 3) NULL,
	elev2 numeric(12, 3) NULL,
	custom_y1 numeric(12, 3) NULL,
	custom_y2 numeric(12, 3) NULL,
	custom_elev1 numeric(12, 3) NULL,
	custom_elev2 numeric(12, 3) NULL,
	sys_elev1 numeric(12, 3) NULL,
	sys_elev2 numeric(12, 3) NULL,
	arc_type varchar(18) NOT NULL,
	arccat_id varchar(30) NOT NULL,
	matcat_id varchar(30) NULL,
	epa_type varchar(16) NOT NULL,
	sector_id int4 NOT NULL,
	state int2 NOT NULL,
	state_type int2 NOT NULL,
	annotation text NULL,
	observ text NULL,
	"comment" text NULL,
	sys_slope numeric(12, 4) NULL,
	inverted_slope bool NULL,
	custom_length numeric(12, 2) NULL,
	dma_id int4 NOT NULL,
	soilcat_id varchar(16) NULL,
	function_type varchar(50) NULL,
	category_type varchar(50) NULL,
	fluid_type varchar(50) NULL,
	location_type varchar(50) NULL,
	workcat_id varchar(255) NULL,
	workcat_id_end varchar(255) NULL,
	buildercat_id varchar(30) NULL,
	builtdate date NULL,
	enddate date NULL,
	ownercat_id varchar(30) NULL,
	muni_id int4 NULL,
	postcode varchar(16) NULL,
	streetaxis_id varchar(16) NULL,
	postnumber int4 NULL,
	postcomplement varchar(100) NULL,
	streetaxis2_id varchar(16) NULL,
	postnumber2 int4 NULL,
	postcomplement2 varchar(100) NULL,
	descript text NULL,
	link varchar(512) NULL,
	verified varchar(20) NULL,
	the_geom public.geometry(linestring, SRID_VALUE) NULL,
	undelete bool NULL,
	label_x varchar(30) NULL,
	label_y varchar(30) NULL,
	label_rotation numeric(6, 3) NULL,
	publish bool NULL,
	inventory bool NULL,
	uncertain bool NULL,
	expl_id int4 NOT NULL,
	num_value numeric(12, 3) NULL,
	feature_type varchar(16) NULL,
	tstamp timestamp NULL,
	lastupdate timestamp NULL,
	lastupdate_user varchar(50) NULL,
	insert_user varchar(50) NULL,
	district_id int4 NULL,
	workcat_id_plan varchar(255) NULL,
	asset_id varchar(50) NULL,
	pavcat_id varchar(30) NULL,
	drainzone_id int4 NULL,
	nodetype_1 varchar(30) NULL,
	node_sys_top_elev_1 numeric(12, 3) NULL,
	node_sys_elev_1 numeric(12, 3) NULL,
	nodetype_2 varchar(30) NULL,
	node_sys_top_elev_2 numeric(12, 3) NULL,
	node_sys_elev_2 numeric(12, 3) NULL,
	parent_id varchar(16) NULL,
	expl_id2 int4 NULL,
	CONSTRAINT audit_psector_arc_traceability_pkey PRIMARY KEY (id)
);


CREATE TABLE audit_psector_node_traceability (
	id serial4 NOT NULL,
	psector_id int4 NOT NULL,
	psector_state int2 NOT NULL,
	doable bool NOT NULL,
	addparam json NULL,
	audit_tstamp timestamp NULL DEFAULT now(),
	audit_user text NULL DEFAULT CURRENT_USER,
	action varchar(16) NOT NULL,
	node_id varchar(16) NOT NULL,
	code varchar(30) NULL,
	top_elev numeric(12, 3) NULL,
	ymax numeric(12, 3) NULL,
	elev numeric(12, 3) NULL,
	custom_top_elev numeric(12, 3) NULL,
	custom_ymax numeric(12, 3) NULL,
	custom_elev numeric(12, 3) NULL,
	node_type varchar(30) NOT NULL,
	nodecat_id varchar(30) NOT NULL,
	epa_type varchar(16) NOT NULL,
	sector_id int4 NOT NULL,
	state int2 NOT NULL,
	state_type int2 NULL,
	annotation text NULL,
	observ text NULL,
	"comment" text NULL,
	dma_id int4 NOT NULL,
	soilcat_id varchar(16) NULL,
	function_type varchar(50) NULL,
	category_type varchar(50) NULL,
	fluid_type varchar(50) NULL,
	location_type varchar(50) NULL,
	workcat_id varchar(255) NULL,
	workcat_id_end varchar(255) NULL,
	buildercat_id varchar(30) NULL,
	builtdate date NULL,
	enddate date NULL,
	ownercat_id varchar(30) NULL,
	muni_id int4 NULL,
	postcode varchar(16) NULL,
	streetaxis_id varchar(16) NULL,
	postnumber int4 NULL,
	postcomplement varchar(100) NULL,
	streetaxis2_id varchar(16) NULL,
	postnumber2 int4 NULL,
	postcomplement2 varchar(100) NULL,
	descript text NULL,
	rotation numeric(6, 3) NULL,
	link varchar(512) NULL,
	verified varchar(20) NULL,
	the_geom public.geometry(point, SRID_VALUE) NULL,
	undelete bool NULL,
	label_x varchar(30) NULL,
	label_y varchar(30) NULL,
	label_rotation numeric(6, 3) NULL,
	publish bool NULL,
	inventory bool NULL,
	xyz_date date NULL,
	uncertain bool NULL,
	unconnected bool NULL,
	expl_id int4 NOT NULL,
	num_value numeric(12, 3) NULL,
	feature_type varchar(16) NULL,
	tstamp timestamp NULL,
	arc_id varchar(16) NULL,
	lastupdate timestamp NULL,
	lastupdate_user varchar(50) NULL,
	insert_user varchar(50) NULL,
	matcat_id varchar(16) NULL,
	district_id int4 NULL,
	workcat_id_plan varchar(255) NULL,
	asset_id varchar(50) NULL,
	drainzone_id int4 NULL,
	parent_id varchar(16) NULL,
	expl_id2 int4 NULL,
	CONSTRAINT audit_psector_node_traceability_pkey PRIMARY KEY (id)
);


CREATE TABLE audit_psector_connec_traceability (
	id serial4 NOT NULL,
	psector_id int4 NOT NULL,
	psector_state int2 NOT NULL,
	doable bool NOT NULL,
	psector_arc_id varchar(16) NULL,
	link_id int4 NULL,
	link_the_geom public.geometry(linestring, SRID_VALUE) NULL,
	audit_tstamp timestamp NULL DEFAULT now(),
	audit_user text NULL DEFAULT CURRENT_USER,
	action varchar(16) NOT NULL,
	connec_id varchar(16) NOT NULL,
	code varchar(30) NULL,
	top_elev numeric(12, 4) NULL,
	y1 numeric(12, 4) NULL,
	y2 numeric(12, 4) NULL,
	connec_type varchar(30) NOT NULL,
	connecat_id varchar(30) NOT NULL,
	sector_id int4 NOT NULL,
	customer_code varchar(30) NULL,
	private_connecat_id varchar(30) NULL,
	demand numeric(12, 8) NULL,
	state int2 NOT NULL,
	state_type int2 NULL,
	connec_depth numeric(12, 3) NULL,
	connec_length numeric(12, 3) NULL,
	arc_id varchar(16) NULL,
	annotation text NULL,
	observ text NULL,
	"comment" text NULL,
	dma_id int4 NOT NULL,
	soilcat_id varchar(16) NULL,
	function_type varchar(50) NULL,
	category_type varchar(50) NULL,
	fluid_type varchar(50) NULL,
	location_type varchar(50) NULL,
	workcat_id varchar(255) NULL,
	workcat_id_end varchar(255) NULL,
	buildercat_id varchar(30) NULL,
	builtdate date NULL,
	enddate date NULL,
	ownercat_id varchar(30) NULL,
	muni_id int4 NULL,
	postcode varchar(16) NULL,
	streetaxis_id varchar(16) NULL,
	postnumber int4 NULL,
	postcomplement varchar(100) NULL,
	streetaxis2_id varchar(16) NULL,
	postnumber2 int4 NULL,
	postcomplement2 varchar(100) NULL,
	descript text NULL,
	link varchar(512) NULL,
	verified varchar(20) NULL,
	rotation numeric(6, 3) NULL,
	the_geom public.geometry(point, SRID_VALUE) NULL,
	undelete bool NULL,
	label_x varchar(30) NULL,
	label_y varchar(30) NULL,
	label_rotation numeric(6, 3) NULL,
	accessibility bool NULL,
	diagonal varchar(50) NULL,
	publish bool NULL,
	inventory bool NULL,
	uncertain bool NULL,
	expl_id int4 NOT NULL,
	num_value numeric(12, 3) NULL,
	feature_type varchar(16) NULL,
	tstamp timestamp NULL,
	pjoint_type varchar(16) NULL,
	pjoint_id varchar(16) NULL,
	lastupdate timestamp NULL,
	lastupdate_user varchar(50) NULL,
	insert_user varchar(50) NULL,
	matcat_id varchar(16) NULL,
	district_id int4 NULL,
	workcat_id_plan varchar(255) NULL,
	asset_id varchar(50) NULL,
	drainzone_id int4 NULL,
	expl_id2 int4 NULL,
	CONSTRAINT audit_psector_connec_traceability_pkey PRIMARY KEY (id)
);


CREATE TABLE audit_psector_gully_traceability (
	id serial4 NOT NULL,
	psector_id int4 NOT NULL,
	psector_state int2 NOT NULL,
	doable bool NOT NULL,
	psector_arc_id varchar(16) NULL,
	link_id int4 NULL,
	link_the_geom public.geometry(linestring, SRID_VALUE) NULL,
	audit_tstamp timestamp NULL DEFAULT now(),
	audit_user text NULL DEFAULT CURRENT_USER,
	action varchar(16) NOT NULL,
	gully_id varchar(16) NOT NULL,
	code varchar(30) NULL,
	top_elev numeric(12, 4) NULL,
	ymax numeric(12, 4) NULL,
	sandbox numeric(12, 4) NULL,
	matcat_id varchar(18) NULL,
	gully_type varchar(30) NOT NULL,
	gratecat_id varchar(30) NULL,
	units int2 NULL,
	groove bool NULL,
	siphon bool NULL,
	connec_arccat_id varchar(18) NULL,
	connec_length numeric(12, 3) NULL,
	connec_depth numeric(12, 3) NULL,
	arc_id varchar(16) NULL,
	sector_id int4 NOT NULL,
	state int2 NOT NULL,
	state_type int2 NOT NULL,
	annotation text NULL,
	observ text NULL,
	"comment" text NULL,
	dma_id int4 NOT NULL,
	soilcat_id varchar(16) NULL,
	function_type varchar(50) NULL,
	category_type varchar(50) NULL,
	fluid_type varchar(50) NULL,
	location_type varchar(50) NULL,
	workcat_id varchar(255) NULL,
	workcat_id_end varchar(255) NULL,
	buildercat_id varchar(30) NULL,
	builtdate date NULL,
	enddate date NULL,
	ownercat_id varchar(30) NULL,
	muni_id int4 NULL,
	postcode varchar(16) NULL,
	streetaxis_id varchar(16) NULL,
	postnumber int4 NULL,
	postcomplement varchar(100) NULL,
	streetaxis2_id varchar(16) NULL,
	postnumber2 int4 NULL,
	postcomplement2 varchar(100) NULL,
	descript text NULL,
	link varchar(512) NULL,
	verified varchar(20) NULL,
	rotation numeric(6, 3) NULL,
	the_geom public.geometry(point, SRID_VALUE) NULL,
	undelete bool NULL,
	label_x varchar(30) NULL,
	label_y varchar(30) NULL,
	label_rotation numeric(6, 3) NULL,
	publish bool NULL,
	inventory bool NULL,
	uncertain bool NULL,
	expl_id int4 NOT NULL,
	num_value numeric(12, 3) NULL,
	feature_type varchar(16) NULL,
	tstamp timestamp NULL,
	pjoint_type varchar(16) NULL,
	pjoint_id varchar(16) NULL,
	lastupdate timestamp NULL,
	lastupdate_user varchar(50) NULL,
	insert_user varchar(50) NULL,
	district_id int4 NULL,
	workcat_id_plan varchar(255) NULL,
	asset_id varchar(50) NULL,
	connec_matcat_id text NULL,
	connec_y2 numeric(12, 3) NULL,
	gratecat2_id text NULL,
	epa_type varchar(16) NOT NULL,
	groove_height float8 NULL,
	groove_length float8 NULL,
	units_placement varchar(16) NULL,
	drainzone_id int4 NULL,
	expl_id2 int4 NULL,
	CONSTRAINT audit_psector_gully_traceability_pkey PRIMARY KEY (id)
);

